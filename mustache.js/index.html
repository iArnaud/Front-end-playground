<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Mustache.js show-off</title>
    </head>
    <body>

    </body>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>

        $.fn.filterNode = function(name) {
            return this.find('*').filter(function() {
                return this.nodeName === name;
            });
        };

        // example: 'http://www.emsc-csem.org/service/rss/rss.php?typ=emsc&min_lat=10&min_long=-30&max_long=65';
        // (EMSC - Last 50 earthquakes in euro mediteranean region)
        function handleRSS(url) {
            var obj = null;
            $.ajax({
                type: "GET",
                url: url
                }).done(function(xml) {

                var lats = [];
                var longs = [];
                var latlongs = [];
                // See http://goo.gl/jePWH
                $(xml).filterNode('geo:lat').each(function() {
                    lats.push($(this).text());
                });
                $(xml).filterNode('geo:long').each(function() {
                    longs.push($(this).text());
                });
                for(i=0;i<lats.length;i++){
                    latlongs.push([lats[i], longs[i]]);
                }
                console.log(latlongs);
            });
        }

        $(document).ready(function() {
            // EMSC - Last 50 earthquakes in euro mediteranean region
            var url = 'http://www.emsc-csem.org/service/rss/rss.php?typ=emsc&min_lat=10&min_long=-30&max_long=65';
            //url = 'http://edn1.esri.com/demos/jqueryrss/sample.rss';
            handleRSS(url);

        });
    </script>
</html>

